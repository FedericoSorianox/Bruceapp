# üöÄ CONFIGURACI√ìN CORRECTA PARA RENDER
# ‚ö†Ô∏è IMPORTANTE: Esta configuraci√≥n debe coincidir exactamente con el dashboard de Render
#
# PARA APLICAR ESTOS CAMBIOS:
# 1. Ve al dashboard de Render ‚Üí Settings
# 2. Copia exactamente esta configuraci√≥n
# 3. Configura las Secret Files mencionadas abajo
# 4. Redeploy manualmente

services:
  - type: web
    name: bruceapp-frontend
    env: node
    # ‚úÖ CORRECCI√ìN 1: Build command simplificado (sin npm ci)
    buildCommand: npm run build
    startCommand: npm run start
    # ‚úÖ CORRECCI√ìN 2: Puerto din√°mico para compatibilidad con Render
    # Render asigna PORT autom√°ticamente (10000 o similar)
    envVars:
      - key: NODE_ENV
        value: production
      # ‚úÖ CORRECCI√ìN 3: Node.js version espec√≠fica
      - key: NODE_VERSION
        value: 18.20.4
      - key: NODE_OPTIONS
        value: --max-old-space-size=4096
      # ‚úÖ CORRECCI√ìN 4: URL p√∫blica correcta
      - key: NEXT_PUBLIC_API_URL
        value: https://bruceapponrender.com
    
    # üîí SECRET FILES REQUERIDOS (configurar en dashboard):
    # 1. JWT_SECRET: Generar con: openssl rand -base64 32
    # 2. MONGODB_URI: Connection string de MongoDB Atlas
    # 3. OPENAI_API_KEY: API key de OpenAI (sk-...)
    
    autoDeploy: true
    healthCheckPath: /
    plan: free
